/*
  filename: integralui.treegrid.js
  version : 1.2.0
  Copyright Â© 2016-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
import { Component, ComponentFactoryResolver, ContentChildren, ElementRef, EventEmitter, HostListener, Input, Output, Renderer, ViewChild, ViewChildren, ViewContainerRef, ViewEncapsulation } from '@angular/core';
import { IntegralUIBaseService, IntegralUIOrientation, IntegralUISortOrder, IntegralUITemplate, IntegralUITComponent } from './integralui.core';
import { IntegralUIBaseGrid, IntegralUIGridLines } from './integralui.base.grid';
import { IntegralUICommonService } from '../services/integralui.common.service';
import { IntegralUIDataService } from '../services/integralui.data.service';
import { IntegralUIDragDropService } from '../services/integralui.dragdrop.service';
import { IntegralUIFilterService } from '../services/integralui.filter.service';
var IntegralUITreeGrid = (function (_super) {
__extends(IntegralUITreeGrid,_super);
function IntegralUITreeGrid(a,b,c,d,e,h,g,k){var f=_super.call(this,a,b,c,d,e,h)||this;f.dataService=a;f.dragDropService=b;f.elemRef=c;f.elemRenderer=d;f.commonService=e;f.filterService=h;f.cmpResolver=g;f.baseService=k;f.headerData=[];f.rowData=[];f.cellData=[];f.footerData=[];f.fullList=[];f.expandTimeout=null;f.expandRow=null;f.expandColIndex=0;f.horScrollOrientation=IntegralUIOrientation.Horizontal;f.isThereChildRows=!1;f.currentPageList=[];f.currentPageNumber=1;f.onlyCurrentPage=!1;f.pageNumber=
0;f.pageList=[];f.pageRowCount=0;f.blockMarginTop=0;f.blockSize={width:0,height:0};f.columnPadding={top:0,right:0,bottom:0,left:0};f.updateTimer=null;f.templateList=[];f.gridCursor="default";f.refreshTimer=null;f.trialRef=null;f.autoExpand=!1;f.afterCollapse=new EventEmitter;f.afterExpand=new EventEmitter;f.beforeCollapse=new EventEmitter;f.beforeExpand=new EventEmitter;f.columnStartPos={x:0,y:0};f.resizeColumn=null;f.resizeColumnIndex=-1;return f}
Object.defineProperty(IntegralUITreeGrid.prototype,"expandColumnIndex",{get:function(){return this.expandColIndex},set:function(a){this.expandColIndex!=a&&(this.expandColIndex=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(IntegralUITreeGrid.prototype,"indent",{get:function(){return this.options.indent},set:function(a){this.options.indent!=a&&(this.options.indent=a,this.updateLayout())},enumerable:!0,configurable:!0});
Object.defineProperty(IntegralUITreeGrid.prototype,"showHeader",{get:function(){return this.isHeaderVisible},set:function(a){this.isHeaderVisible!=a&&(this.isHeaderVisible=a,this.updateLayout())},enumerable:!0,configurable:!0});Object.defineProperty(IntegralUITreeGrid.prototype,"showFooter",{get:function(){return this.isFooterVisible},set:function(a){this.isFooterVisible!=a&&(this.isFooterVisible=a,this.updateLayout())},enumerable:!0,configurable:!0});
IntegralUITreeGrid.prototype.ngOnInit=function(){this.baseService.setComponent(this);this.updateData();this.generalClassName="iui-treegrid";this.columnClassName=this.generalClassName+"-column";this.columnHeaderClassName=this.columnClassName+"-header";this.columnBodyClassName=this.columnClassName+"-body";this.columnFooterClassName=this.columnClassName+"-footer";this.rowClassName=this.generalClassName+"-row";this.cellBorderClassName="iui-treegrid-lines-both";this.cellClassName=this.rowClassName+"-cell";
this.expandBoxClassName=this.generalClassName+"-expand-box";this.gridLinesClassName=this.generalClassName+"-lines";this.sortingClassName="iui-sort";this.initStyle()};IntegralUITreeGrid.prototype.updateData=function(){this.dataService.init([{data:this.columns,fields:this.options.columnFields,key:this.columnDataKey},{data:this.rows,fields:this.options.rowFields,key:this.rowDataKey}])};
IntegralUITreeGrid.prototype.initStyle=function(){this.defaultStyle={general:{disabled:this.generalClassName+"-disabled",focused:this.generalClassName+"-focused",normal:this.generalClassName,hovered:this.generalClassName+"-hovered",selected:this.generalClassName+"-selected"},column:{header:{cell:this.columnHeaderClassName+"-cell",disabled:this.columnHeaderClassName+"-disabled",normal:this.columnHeaderClassName,hovered:this.columnHeaderClassName+"-hovered",selected:this.columnHeaderClassName+"-selected"},
body:{cell:this.columnBodyClassName+"-cell",disabled:this.columnBodyClassName+"-disabled",normal:this.columnBodyClassName,hovered:this.columnBodyClassName+"-hovered",selected:this.columnBodyClassName+"-selected"},footer:{cell:this.columnFooterClassName+"-cell",disabled:this.columnFooterClassName+"-disabled",normal:this.columnFooterClassName,hovered:this.columnFooterClassName+"-hovered",selected:this.columnFooterClassName+"-selected"},sorting:{normal:{ascending:this.sortingClassName+"-ascending",descending:this.sortingClassName+
"-descending"},selected:{ascending:this.sortingClassName+"-ascending-selected",descending:this.sortingClassName+"-descending-selected"}}},row:{general:{disabled:this.rowClassName+"-disabled",focused:this.rowClassName+"-focused",normal:this.rowClassName,hovered:this.rowClassName+"-hovered",selected:this.rowClassName+"-selected"},expandBox:{general:this.expandBoxClassName,load:this.expandBoxClassName+"-load",expanded:this.expandBoxClassName+"-open",collapsed:this.expandBoxClassName+"-close"},cell:{disabled:this.cellClassName+
"-disabled",focused:this.cellClassName+"-focused",normal:this.cellClassName,hovered:this.cellClassName+"-hovered",selected:this.cellClassName+"-selected"}},gridLines:{none:this.gridLinesClassName+"-none",horizontal:this.gridLinesClassName+"-horizontal",vertical:this.gridLinesClassName+"-vertical",both:this.gridLinesClassName+"-both"}};this.updateStyle(this.controlStyle);this.refresh()};
IntegralUITreeGrid.prototype.ngAfterViewInit=function(){var a=this,b=setTimeout(function(){var c=a.cmpResolver.resolveComponentFactory(IntegralUITComponent);c&&a.contentRef&&(a.trialRef=a.contentRef.createComponent(c));clearTimeout(b)},100);a.updateLayout()};
IntegralUITreeGrid.prototype.ngAfterContentInit=function(){this.templateList=this.templates.toArray();for(var a=0;a<this.templateList.length;a++)if(this.templateList[a].settings)switch(this.templateList[a].settings.type){case "header":this.headerData.push(this.templateList[a].getTemplate());break;case "row":this.rowData.push(this.templateList[a].getTemplate());break;case "cell":this.cellData.push(this.templateList[a].getTemplate());break;case "footer":this.footerData.push(this.templateList[a].getTemplate())}};
IntegralUITreeGrid.prototype.ngOnDestroy=function(){this.expandTimeout&&clearTimeout(this.expandTimeout);this.removeDropMark();this.trialRef&&this.trialRef.destroy()};IntegralUITreeGrid.prototype.updateScrollColumnList=function(){this.scrollColumnList.length=0;for(var a=this.viewIndexRange.left;a<this.currentColumnList.length&&a<=this.viewIndexRange.right;a++){var b={data:this.currentColumnList[a].data,style:{}};this.updateColumnStyle(b);this.scrollColumnList.push(b)}};
IntegralUITreeGrid.prototype.updateScrollRowList=function(){for(var a=this.scrollRowList.length=0,b=this.currentIndex;b<this.currentRowList.length&&b<this.currentIndex+this.visibleRange;b++){var c=this.currentRowList[b];c={data:c.data,indent:c.indent,cells:[],style:{}};this.updateRowStyle(c);for(var d=c.data[this.options.rowFields.cells],e=this.viewIndexRange.left;e<this.currentColumnList.length&&e<=this.viewIndexRange.right;e++){var h=this.currentColumnList[e].data,g=e,k=h[this.options.columnFields.id];
k&&(g=this.getCellIndexById(d,e,k));a++;h={align:this.getCellAlignment(h),colIndex:e-this.viewIndexRange.left,data:0<=g&&g<d.length?d[g]:{},expandBoxAllowed:this.isExpandBoxAllowed(h),indent:this.getRowIndent(c,h),rowIndex:b-this.currentIndex,style:{content:"iui-grid-row-cell-content"},tabIndex:a,width:this.getCellWidth(c,h),height:0<this.rowHeight?this.rowHeight+"px":"auto"};c.cells.push(h)}this.scrollRowList.push(c)}};
IntegralUITreeGrid.prototype.addColumnToCurrentList=function(a){if(this.isColumnVisible(a)&&(a.type="column",a[this.options.columnFields.id]||(a[this.options.columnFields.id]=this.commonService.getUniqueId()),0!=a[this.options.columnFields.visible])){var b=a[this.options.columnFields.filterParams];b=b?this.filterService.createTree(b.conditions,b.formula):null;this.currentColumnList.push({data:a,filter:b})}};
IntegralUITreeGrid.prototype.updateCurrentColumnList=function(){this.currentColumnList.length=0;var a=this.dataService.getList(null,this.columnDataKey);if(a)for(var b=0;b<a.length;b++)this.addColumnToCurrentList(a[b])};
IntegralUITreeGrid.prototype.updateCurrentRowList=function(){this.currentRowList.length=0;if(this.options.paging.enabled){if(1<=this.currentPageNumber&&this.currentPageNumber<=this.pageList.length)for(var a=0;a<this.pageList[this.currentPageNumber-1].length;a++)this.currentRowList.push(this.pageList[this.currentPageNumber-1][a])}else{this.isThereChildRows=!1;var b=this.dataService.getList(null,this.rowDataKey);if(b)for(this.applySorting(b),a=0;a<b.length;a++)this.addChildRows(b[a],0,null,!1)}};
IntegralUITreeGrid.prototype.addChildRows=function(a,b,c,d){if(!a[this.options.rowFields.rows])return c=this.addRowToCurrentList(a,b,c,d);if(c=this.addRowToCurrentList(a,b,c,d)){var e=0,h;if(d||this.isRowExpanded(a)){var g=a[this.options.rowFields.rows];if(g){this.applySorting(g);for(var k=0;k<g.length;k++)(h=this.addChildRows(g[k],b+this.options.indent,a[this.options.rowFields.id],d))&&e++}}d||this.isThereChildRows||!(0<e||!this.isRowExpanded(a)&&a[this.options.rowFields.rows]&&0<a[this.options.rowFields.rows].length&&
this.isThereVisibleChildren(a))||(this.isThereChildRows=!0)}return c};
IntegralUITreeGrid.prototype.addRowToCurrentList=function(a,b,c,d){a.type||(a.type="row");a[this.options.rowFields.id]||(a[this.options.rowFields.id]=this.commonService.getUniqueId());c&&(a[this.options.rowFields.pid]=c);c=!0;var e=a[this.options.rowFields.cells];if(e&&0<e.length){c=this.isRowAllowed(a,d);for(var h,g=0;g<this.currentColumnList.length;g++){h=this.currentColumnList[g].data;h=h[this.options.columnFields.id];var k=g;h&&(k=this.getCellIndexById(e,g,h));0<=k&&k<e.length&&(e[k].type="cell",
e[k][this.options.cellFields.rid]=a[this.options.rowFields.id])}}c&&(d?this.fullList.push(a):this.options.paging.enabled?this.onlyCurrentPage?this.currentPageList.push({data:a,indent:b}):(a[this.options.rowFields.pid]||this.pageRowCount++,this.pageRowCount>this.options.paging.pageSize&&(this.pageRowCount=1,this.pageNumber++,this.pageList.push([])),this.pageList[this.pageNumber].push({data:a,indent:b})):this.currentRowList.push({data:a,indent:b}));return c};
IntegralUITreeGrid.prototype.getFullList=function(){this.fullList.length=0;var a=this.dataService.getList(null,this.rowDataKey);if(a)for(var b=0;b<a.length;b++)this.addChildRows(a[b],0,null,!0);return this.fullList};IntegralUITreeGrid.prototype.loadData=function(a,b,c,d){this.processLoadData(a,b,c,d)};
IntegralUITreeGrid.prototype.expandOnDelay=function(a){var b=this;0!=b.autoExpand&&(b.expandRow!=a&&(b.expandTimeout&&clearTimeout(b.expandTimeout),b.expandTimeout=setTimeout(function(){b.expandTimeout&&b.expand(a);clearTimeout(b.expandTimeout)},500)),b.expandRow=a)};IntegralUITreeGrid.prototype.rowDragStart=function(a,b){this.processDragStart(a,b.data);a.stopPropagation()};
IntegralUITreeGrid.prototype.rowDragOver=function(a,b,c){if(this.rowElems){var d=this.rowElems.toArray();d&&0<=c&&c<d.length&&(c=this.commonService.getPageRect(d[c].nativeElement),c={x:c.left,y:c.top,width:c.right-c.left,height:c.bottom-c.top},this.expandOnDelay(b.data),this.processScroll(a),this.processDragOver(a,b.data,c))}a.stopPropagation()};
IntegralUITreeGrid.prototype.rowDragDrop=function(a,b){this.expandRow=null;this.expandTimeout&&clearTimeout(this.expandTimeout);this.processDragDrop(a,b.data);a.stopPropagation()};IntegralUITreeGrid.prototype.isParentOf=function(a,b){var c=this.dataService.getParent(b);return a&&b&&c&&this.commonService.isEqual(a[this.options.rowFields.id],c[this.options.rowFields.id])?!0:!1};
IntegralUITreeGrid.prototype.isChildOf=function(a,b){var c=!1;if(a&&b){var d=b[this.options.rowFields.rows];if(d&&0<d.length)for(var e=0;e<d.length;e++){if(this.commonService.isEqual(a[this.options.rowFields.id],d[e][this.options.rowFields.id])){c=!0;break}else c=this.isChildOf(a,d[e]);if(c)break}}return c};IntegralUITreeGrid.prototype.collapse=function(a){this.toggle(a,!1)};IntegralUITreeGrid.prototype.expandBoxClicked=function(a,b){1==a.buttons&&this.toggle(b);a.stopPropagation()};
IntegralUITreeGrid.prototype.expand=function(a){this.toggle(a,!0)};
IntegralUITreeGrid.prototype.toggle=function(a,b){if(a){if((a[this.options.rowFields.hasChildren]||a[this.options.rowFields.rows]&&0!=a[this.options.rowFields.rows].length)&&!(b&&0!=a[this.options.rowFields.expanded]||!1===b&&0==a[this.options.rowFields.expanded])){var c=void 0!==b?b:!1!==a[this.options.rowFields.expanded]?!0:!1,d={cancel:!1,row:a};void 0!==b?b?this.beforeExpand.emit(d):this.beforeCollapse.emit(d):c?this.beforeCollapse.emit(d):this.beforeExpand.emit(d);1!=d.cancel&&(c=void 0!=b?b:
!c,c!=a[this.options.rowFields.expanded]&&(a[this.options.rowFields.expanded]=c,this.updateCurrentLayout()),this.isRowExpanded(a)?this.afterExpand.emit({row:a}):this.afterCollapse.emit({row:a}))}}else{c=this.getFullList();for(d=0;d<c.length;d++)c[d][this.options.rowFields.expanded]=b;this.updateCurrentLayout()}};
IntegralUITreeGrid.prototype.getColumnRealIndex=function(a){var b=this.dataService.getList(null,this.columnDataKey);return 0<=a&&a<b.length&&a<this.currentColumnList.length?b.indexOf(this.currentColumnList[a].data):-1};IntegralUITreeGrid.prototype.getCellIndexById=function(a,b,c){var d=-1;if(a){b=this.getColumnRealIndex(b);for(var e=0;e<a.length;e++)if(void 0==a[e][this.options.cellFields.cid]){d=b;break}else if(a[e][this.options.cellFields.cid]==c){d=e;break}}return d};
IntegralUITreeGrid.prototype.getColumnFromCell=function(a,b){var c=null;if(a[this.options.cellFields.cid])for(var d=0;d<this.currentColumnList.length;d++){if(this.currentColumnList[d].data[this.options.columnFields.id]==a[this.options.cellFields.cid]){c=this.currentColumnList[d].data;break}}else 0<=b&&b<this.currentColumnList.length&&(c=this.currentColumnList[b].data);return c};IntegralUITreeGrid.prototype.getCellAlignment=function(a){return a?a[this.options.columnFields.contentAlignment]:""};
IntegralUITreeGrid.prototype.getCellWidth=function(a,b){var c=this.getColumnWidth(b);b&&this.getColumnIndexFromList(b)==this.expandColIndex&&(c-=a.indent);return 0<c?c:0};IntegralUITreeGrid.prototype.getColumnAlignment=function(a,b){return a?b?a[this.options.columnFields.footerAlignment]:a[this.options.columnFields.headerAlignment]:""};IntegralUITreeGrid.prototype.getColumnWidth=function(a){return a&&void 0!=a[this.options.columnFields.width]?a[this.options.columnFields.width]:100};
IntegralUITreeGrid.prototype.getRowIndent=function(a,b){var c=this.columnPadding.left;this.isExpandBoxAllowed(b)&&(c+=a.indent);return c};IntegralUITreeGrid.prototype.isExpandBoxAllowed=function(a){return a?this.getColumnIndexFromList(a)==this.expandColIndex:!1};IntegralUITreeGrid.prototype.isRowExpanded=function(a){return a?a[this.options.rowFields.expanded]||void 0===a[this.options.rowFields.expanded]?!0:!1:!0};
IntegralUITreeGrid.prototype.isThereVisibleChildren=function(a){var b=!1;if(a&&(a=a[this.options.rowFields.rows])&&0<a.length)for(var c=0;c<a.length;c++)if(this.isRowAllowed(a[c])&&!this.isRowFixed(a[c])){b=!0;break}return b};
IntegralUITreeGrid.prototype.columnMouseDown=function(a,b){switch(a.buttons){case 1:if(0<=this.resizeColumnIndex&&this.resizeColumnIndex<this.currentColumnList.length){var c=this.commonService.getShiftPos();this.columnStartPos={x:a.pageX-c.x,y:a.pageY-c.y};this.isColumnResizing=!0;this.resizeColumn=this.currentColumnList[this.resizeColumnIndex].data}else this.columnClick.emit({event:a,column:b.data}),this.processColumnSelection(a,b.data);break;case 2:this.processColumnSelection(a,b.data)}};
IntegralUITreeGrid.prototype.columnMouseUp=function(a,b){};IntegralUITreeGrid.prototype.isColumnWidthFixed=function(a){return 0<=a&&a<this.currentColumnList.length?1==this.currentColumnList[a].data[this.options.columnFields.fixedWidth]:!1};
IntegralUITreeGrid.prototype.columnMouseMove=function(a,b){if(this.isScrollActive)this.gridCursor="default";else if(this.resizeColumnIndex=-1,this.columnElems){var c=this.columnElems.toArray(),d=this.getColumnCurrentIndex(b.data),e=d-this.viewIndexRange.left;0<=e&&e<c.length&&(c=c[e].nativeElement,this.commonService.getShiftPos(),c=this.commonService.getPageRect(c),e={top:c.top,right:c.left+10,bottom:c.bottom,left:c.left},this.commonService.checkHit(a.pageX,a.pageY,{top:c.top,right:c.right,bottom:c.bottom,
left:c.right-10})?this.resizeColumnIndex=d:this.commonService.checkHit(a.pageX,a.pageY,e)&&(this.resizeColumnIndex=d-1),this.isColumnWidthFixed(this.resizeColumnIndex)&&(this.resizeColumnIndex=-1),this.gridCursor=0<=this.resizeColumnIndex||this.isColumnResizing?"ew-resize":"default")}else this.gridCursor="default"};IntegralUITreeGrid.prototype.columnMouseEnter=function(a,b){this.isScrollActive||this.isColumnResizing||(this.hoverColumn=b.data,this.updateColumnStyle(b))};
IntegralUITreeGrid.prototype.columnMouseLeave=function(a,b){this.isScrollActive||this.isColumnResizing||(this.hoverColumn=null,this.gridCursor=this.isColumnResizing?"ew-resize":"default",this.updateColumnStyle(b))};IntegralUITreeGrid.prototype.gridMouseLeave=function(a){this.hoverColumn=this.hoverRow=null};IntegralUITreeGrid.prototype.rowMouseEnter=function(a,b){this.isScrollActive||this.isColumnResizing||(this.hoverRow=b.data,this.updateRowStyle(b))};
IntegralUITreeGrid.prototype.rowMouseLeave=function(a,b){this.isScrollActive||this.isColumnResizing||(this.hoverRow=null,this.updateRowStyle(b))};
IntegralUITreeGrid.prototype.processLeftArrowKey=function(a){var b=this.getColumnFromCell(a.data,a.colIndex);if(b&&this.getColumnIndexFromList(b)==this.expandColIndex&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length&&(b=this.scrollRowList[a.rowIndex].data,this.isRowExpanded(b)&&this.isThereVisibleChildren(b)))return this.collapse(b),a;if(a=this.getPrevCell(a)){this.currentFocusCell=a.data;this.isFirstCell(a)&&this.scrollPos({x:this.currentScrollPos.x-2*a.width,y:this.currentScrollPos.y});var c=
this;setTimeout(function(){c.refresh()},1)}return a};
IntegralUITreeGrid.prototype.processRightArrowKey=function(a){var b=this.getColumnFromCell(a.data,a.colIndex);if(b&&this.getColumnIndexFromList(b)==this.expandColIndex&&0<=a.rowIndex&&a.rowIndex<this.scrollRowList.length&&(b=this.scrollRowList[a.rowIndex].data,!this.isRowExpanded(b)&&this.isThereVisibleChildren(b)))return this.expand(b),a;if(a=this.getNextCell(a)){this.currentFocusCell=a.data;this.isLastCell(a)?this.scrollPos({x:this.currentScrollPos.x+2*a.width,y:this.currentScrollPos.y}):a.colIndex>=
this.currentColumnList.length-2&&this.scrollPos({x:this.maxScrollPos.x,y:this.currentScrollPos.y});var c=this;setTimeout(function(){c.refresh()},1)}return a};IntegralUITreeGrid.prototype.getFooterBottomPos=function(){return this.isHorScrollVisible()?16:0};
IntegralUITreeGrid.prototype.updateRange=function(){this.viewIndexRange={left:0,middle:999,right:999};for(var a=!1,b=!1,c=!1,d=this.currentScrollPos.x+this.clientRect.width,e=2*d,h=0,g=0;g<this.currentColumnList.length&&(h+=this.getColumnWidth(this.currentColumnList[g].data)+this.columnPadding.left+this.columnPadding.right+6,!a&&h>=this.currentScrollPos.x&&(this.viewIndexRange.left=g,a=!0),!b&&h>=d&&(this.viewIndexRange.middle=g,b=!0),!c&&h>=e&&(this.viewIndexRange.right=g,c=!0),!a||!c);g++);for(g=
h=0;g<this.currentColumnList.length&&g<this.viewIndexRange.left;g++)h+=this.getColumnWidth(this.currentColumnList[g].data)+this.columnPadding.left+this.columnPadding.right+6;this.contentLeftPos=this.currentScrollPos.x-h;this.updateScrollColumnList();this.updateScrollRowList()};
IntegralUITreeGrid.prototype.updateCurrentLayout=function(){var a=this;a.resetLayout();a.updateCurrentRowList();a.updateRange();a.updateScrollSize();a.updateTimer=setTimeout(function(){a.updateBlockSize();clearTimeout(a.updateTimer)},1)};IntegralUITreeGrid.prototype.updateBlockSize=function(){this.blockSize={width:this.bodyElem.nativeElement.offsetWidth,height:this.bodyElem.nativeElement.offsetHeight}};
IntegralUITreeGrid.prototype.resetLayout=function(){this.updateTimer&&clearTimeout(this.updateTimer);this.updateTimer=null};
IntegralUITreeGrid.prototype.updateLayout=function(){var a=this;a.allowUpdate&&(a.resetLayout(),a.updateTimer=setTimeout(function(){a.updateCurrentColumnList();a.updateCurrentRowList();a.clientRect={width:a.elemRef.nativeElement.firstElementChild.clientWidth,height:a.elemRef.nativeElement.firstElementChild.clientHeight};a.updateRange();var b=setTimeout(function(){a.columnPadding={top:0,right:0,bottom:0,left:0};if(a.columnElems){var c=a.columnElems.toArray();c&&0<c.length&&(a.columnPadding=a.commonService.getPadding(c[0].nativeElement.firstElementChild))}a.headerHeight=
a.headerElem?a.headerElem.nativeElement.offsetHeight:0;a.footerHeight=a.footerElem?a.footerElem.nativeElement.offsetHeight:0;a.updateVisibleRange();a.updateRange();var d=setTimeout(function(){a.blockMarginTop=a.headerHeight;a.updateBlockSize();if(a.rowElems){var b=a.rowElems.toArray();a.avgRowHeight=0;if(b&&0<b.length){for(var c=0,g=0;g<b.length;g++)c+=b[g].nativeElement.offsetHeight;a.avgRowHeight=Math.floor(c/b.length)}}a.updateScrollSize();a.updateComplete.emit(null);clearTimeout(d)},1);clearTimeout(b)},
1);clearTimeout(a.updateTimer)},100))};IntegralUITreeGrid.prototype.updateVisibleRange=function(){this.visibleRange=1;var a=this.rowElems.toArray();if(a&&0<a.length){for(var b=0,c=0;c<a.length;c++)b+=a[c].nativeElement.offsetHeight;a=Math.floor(b/a.length);0<a&&(this.visibleRange=Math.floor((this.clientRect.height-(this.headerHeight+this.footerHeight))/a)+1)}};
IntegralUITreeGrid.prototype.updateScrollSize=function(){for(var a=this.allColWidth=0;a<this.currentColumnList.length;a++)this.allColWidth+=this.getColumnWidth(this.currentColumnList[a].data)+this.columnPadding.left+this.columnPadding.right+6;this.scrollSize={width:this.allColWidth-this.clientRect.width,height:this.avgRowHeight*this.currentRowList.length-this.clientRect.height+this.headerHeight+this.footerHeight+this.avgRowHeight};this.isVerScrollVisible()&&(this.scrollSize.width+=16);this.isHorScrollVisible()&&
(this.scrollSize.height+=16);this.scrollSize.width=0<this.scrollSize.width?this.scrollSize.width:0;this.scrollSize.height=0<this.scrollSize.height?this.scrollSize.height:0;this.maxScrollPos={x:this.scrollSize.width,y:this.scrollSize.height};this.currentScrollPos.x>this.maxScrollPos.x&&this.changeHorizontalScrollPos(this.maxScrollPos.x);this.currentScrollPos.y>this.maxScrollPos.y&&this.changeVerticalScrollPos(this.maxScrollPos.y);this.scrollBarSize={width:this.isVerScrollVisible()?this.clientRect.width-
20:this.clientRect.width-4,height:this.isHorScrollVisible()?this.clientRect.height-20:this.clientRect.height-4};this.scrollLargeChange={x:this.scrollBarSize.width,y:this.scrollBarSize.height-this.headerHeight-this.footerHeight}};IntegralUITreeGrid.prototype.getRowScrollIndex=function(a){for(var b=-1,c=0;c<this.scrollRowList.length;c++)if(this.scrollRowList[c].data==a){b=c;break}return b};
IntegralUITreeGrid.prototype.onWindowMouseMove=function(a){if(1==a.buttons&&this.isColumnResizing){var b=this.commonService.getShiftPos();a={x:a.pageX-b.x,y:a.pageY-b.y};this.resizeColumn&&(b=this.getColumnWidth(this.resizeColumn)+a.x-this.columnStartPos.x,this.resizeColumn[this.options.columnFields.width]=0<b?b:0,this.updateCellWidth(this.resizeColumn),this.updateScrollSize());this.columnStartPos=a}};
IntegralUITreeGrid.prototype.onWindowMouseUp=function(a){this.isColumnResizing&&(this.isColumnResizing=!1,this.gridCursor="default",this.columnSizeChanged.emit({column:this.resizeColumn}),this.updateRange());this.hoverColumn=this.hoverRow=null;this.refresh()};
IntegralUITreeGrid.prototype.updateCellWidth=function(a){for(var b=0;b<this.scrollRowList.length;b++)for(var c=this.scrollRowList[b],d=this.getColumnCurrentIndex(a),e=0;e<c.cells.length;e++)if(c.cells[e].colIndex==d-this.viewIndexRange.left){d=this.getCellWidth(c,a);if(this.getColumnIndexFromList(a)==this.expandColIndex){var h=this.getColumnWidth(a);h=0<h?h:this.columnPadding.left;c.cells[e].indent=0==d?h:this.getRowIndent(c,a)}c.cells[e].width=d;break}};
IntegralUITreeGrid.prototype.getRowParent=function(a){return a?this.dataService.findObjectById(a[this.options.rowFields.pid],this.rowDataKey):null};IntegralUITreeGrid.prototype.beginLoad=function(a){a&&(0>this.options.loadRows.indexOf(a)&&this.options.loadRows.push(a),this.refresh())};IntegralUITreeGrid.prototype.endLoad=function(a){a=this.options.loadRows.indexOf(a);0<=a&&this.options.loadRows.splice(a,1);this.updateCurrentLayout()};
IntegralUITreeGrid.prototype.isRowLoading=function(a){return 0<=this.options.loadRows.indexOf(a)?!0:!1};IntegralUITreeGrid.prototype.scrollTo=function(a){if(a){this.suspendLayout();for(var b=this.getRowParent(a);null!=b;)this.expand(b),b=this.getRowParent(b);this.resumeLayout();var c=this,d=setTimeout(function(){var b=c.getRowCurrentIndex(a);0<=b&&(c.scrollPos({x:c.currentScrollPos.x,y:c.avgRowHeight*(b+1-c.visibleRange/2)}),c.updateLayout());clearTimeout(d)},150)}};
IntegralUITreeGrid.prototype.rowMouseDown=function(a,b){this.processRowSelection(a,b.data);a.stopPropagation()};IntegralUITreeGrid.prototype.rowMouseUp=function(a,b){this.updateRowSelection(a,b.data)};IntegralUITreeGrid.prototype.rowClickEvent=function(a,b){1==a.which&&this.rowClick.emit({row:b.data});a.stopPropagation()};IntegralUITreeGrid.prototype.rowDblClickEvent=function(a,b){var c={cancel:!1,row:b.data};this.rowDblClick.emit(c);1!=c.cancel&&this.toggle(b.data);a.stopPropagation()};
IntegralUITreeGrid.prototype.updateColumnStyle=function(a){if(a&&(a.style={header:[],footer:[],sorting:[]},a.style.header.push(this.columnHeaderClassName),a.style.header.push(this.options.currentStyle.column.header.normal),a.data==this.selectedColumn?a.style.header.push(this.options.currentStyle.column.header.selected):a.data==this.hoverColumn&&a.style.header.push(this.options.currentStyle.column.header.hovered),a.style.footer.push(this.columnFooterClassName),a.style.footer.push(this.options.currentStyle.column.footer.normal),
a.data==this.selectedColumn?a.style.footer.push(this.options.currentStyle.column.footer.selected):a.data==this.hoverColumn&&a.style.footer.push(this.options.currentStyle.column.footer.hovered),this.isSortingAllowed()&&this.isSortingColumn(a.data)))switch(this.options.sorting){case IntegralUISortOrder.Ascending:a.style.sorting.push(this.options.currentStyle.column.sorting.normal.ascending);a.data==this.selectedColumn&&a.style.sorting.push(this.options.currentStyle.column.sorting.selected.ascending);
break;case IntegralUISortOrder.Descending:a.style.sorting.push(this.options.currentStyle.column.sorting.normal.descending),a.data==this.selectedColumn&&a.style.sorting.push(this.options.currentStyle.column.sorting.selected.descending)}};
IntegralUITreeGrid.prototype.updateRowStyle=function(a){if(a){a.style={row:[],expandBox:[],cell:[]};a.style.row.push(this.rowClassName);a.style.row.push(this.options.currentStyle.row.general.normal);a.style.cell.push(this.cellClassName);a.style.cell.push(this.options.currentStyle.row.cell.normal);this.isRowEnabled(a.data)?this.isRowSelected(a.data)?(a.style.row.push(this.options.currentStyle.row.general.selected),a.style.cell.push(this.options.currentStyle.row.cell.selected)):this.isRowHovered(a.data)&&
(a.style.row.push(this.options.currentStyle.row.general.hovered),a.style.cell.push(this.options.currentStyle.row.cell.hovered)):(a.style.row.push(this.options.currentStyle.row.general.disabled),a.style.cell.push(this.options.currentStyle.row.cell.disabled));switch(this.gridLines){case IntegralUIGridLines.None:a.style.cell.push(this.options.currentStyle.gridLines.none);break;case IntegralUIGridLines.Horizontal:a.style.cell.push(this.options.currentStyle.gridLines.horizontal);break;case IntegralUIGridLines.Vertical:a.style.cell.push(this.options.currentStyle.gridLines.vertical);
break;default:a.style.cell.push(this.options.currentStyle.gridLines.both)}(this.isThereChildRows||a.data[this.options.rowFields.hasChildren])&&a.style.expandBox.push(this.options.currentStyle.row.expandBox.general);if(a.data[this.options.rowFields.hasChildren]&&(this.isThereVisibleChildren(a.data)||!a.data[this.options.rowFields.rows]||a.data[this.options.rowFields.rows]&&0==a.data[this.options.rowFields.rows].length)||this.isThereVisibleChildren(a.data))this.isRowLoading(a.data)?a.style.expandBox.push(this.options.currentStyle.row.expandBox.load):
!1!==a.data[this.options.rowFields.expanded]?a.style.expandBox.push(this.options.currentStyle.row.expandBox.collapsed):a.style.expandBox.push(this.options.currentStyle.row.expandBox.expanded);for(var b=0;b<a.cells.length;b++){var c=a.cells[b];c.style=this.options.allowFocus&&c.data==this.currentFocusCell?{content:"iui-treegrid-row-cell-content iui-treegrid-row-cell-content-focused"}:{content:"iui-treegrid-row-cell-content"}}}};
IntegralUITreeGrid.prototype.getColumnStyle=function(a){return a?{header:this.getColumnHeaderStyle(a.header),body:this.getColumnBodyStyle(a.body),footer:this.getColumnFooterStyle(a.footer),sorting:this.getColumnSortingStyle(a.sorting)}:this.getDefaultColumnStyle()};
IntegralUITreeGrid.prototype.getColumnHeaderStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnHeaderClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnHeaderClassName+"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,this.columnHeaderClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.columnHeaderClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,
this.columnHeaderClassName+"-selected")}:this.getDefaultColumnHeaderStyle()};
IntegralUITreeGrid.prototype.getColumnBodyStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnBodyClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnBodyClassName+"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,this.columnBodyClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.columnBodyClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,
this.columnBodyClassName+"-selected")}:this.getDefaultColumnBodyStyle()};
IntegralUITreeGrid.prototype.getColumnFooterStyle=function(a){return this.commonService.isString(a)?a:a?{cell:this.commonService.isFieldAvailable(a.cell,this.columnFooterClassName+"-cell"),disabled:this.commonService.isFieldAvailable(a.disabled,this.columnFooterClassName+"-disabled"),normal:this.commonService.isFieldAvailable(a.normal,this.columnFooterClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.columnFooterClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,
this.columnFooterClassName+"-selected")}:this.getDefaultColumnFooterStyle()};IntegralUITreeGrid.prototype.getColumnSortingStyle=function(a){return a?{normal:this.getColumnSortingNormalStyle(a.normal),selected:this.getColumnSortingSelectedStyle(a.selected)}:this.getDefaultColumnSortingStyle()};
IntegralUITreeGrid.prototype.getColumnSortingNormalStyle=function(a){return this.commonService.isString(a)?a:a?{ascending:this.commonService.isFieldAvailable(a.ascending,this.sortingClassName+"-ascending"),descending:this.commonService.isFieldAvailable(a.descending,this.sortingClassName+"-descending")}:{ascending:this.defaultStyle.column.sorting.normal.ascending,descending:this.defaultStyle.column.sorting.normal.descending}};
IntegralUITreeGrid.prototype.getColumnSortingSelectedStyle=function(a){return this.commonService.isString(a)?a:a?{ascending:this.commonService.isFieldAvailable(a.ascending,this.sortingClassName+"-ascending-selected"),descending:this.commonService.isFieldAvailable(a.descending,this.sortingClassName+"-descending-selected")}:{ascending:this.defaultStyle.column.sorting.selected.ascending,descending:this.defaultStyle.column.sorting.selected.descending}};
IntegralUITreeGrid.prototype.getRowStyle=function(a){return a?{general:this.getRowGeneralStyle(a.general),expandBox:this.getRowExpandBoxStyle(a.expandBox),cell:this.getRowCellStyle(a.cell)}:this.getDefaultRowStyle()};
IntegralUITreeGrid.prototype.getRowGeneralStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.disabled,this.rowClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.focused,this.rowClassName+"-focused"),normal:this.commonService.isFieldAvailable(a.normal,this.rowClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.rowClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.rowClassName+
"-selected")}:this.getDefaultRowGeneralStyle()};IntegralUITreeGrid.prototype.getRowExpandBoxStyle=function(a){return this.commonService.isString(a)?a:a?{general:this.commonService.isFieldAvailable(a.disabled,this.expandBoxClassName),load:this.commonService.isFieldAvailable(a.focused,this.expandBoxClassName+"-load"),expanded:this.commonService.isFieldAvailable(a.normal,this.expandBoxClassName+"-open"),collapsed:this.commonService.isFieldAvailable(a.hovered,this.expandBoxClassName+"-close")}:this.getDefaultRowExpandBoxStyle()};
IntegralUITreeGrid.prototype.getRowCellStyle=function(a){return this.commonService.isString(a)?a:a?{disabled:this.commonService.isFieldAvailable(a.disabled,this.cellClassName+"-disabled"),focused:this.commonService.isFieldAvailable(a.focused,this.cellClassName+"-focused"),normal:this.commonService.isFieldAvailable(a.normal,this.cellClassName),hovered:this.commonService.isFieldAvailable(a.hovered,this.cellClassName+"-hovered"),selected:this.commonService.isFieldAvailable(a.selected,this.cellClassName+
"-selected")}:this.getDefaultRowCellStyle()};IntegralUITreeGrid.prototype.getGridLinesStyle=function(a){return a?{none:this.commonService.isFieldAvailable(a.none,this.gridLinesClassName+"-none"),horizontal:this.commonService.isFieldAvailable(a.horizontal,this.gridLinesClassName+"-horizontal"),vertical:this.commonService.isFieldAvailable(a.vertical,this.gridLinesClassName+"-vertical"),both:this.commonService.isFieldAvailable(a.both,this.gridLinesClassName+"-both")}:this.getDefaultGridLinesStyle()};
IntegralUITreeGrid.prototype.getDefaultGridStyle=function(){return{general:this.getDefaultGeneralStyle(),column:this.getDefaultColumnStyle(),row:this.getDefaultRowStyle(),gridLines:this.getDefaultGridLinesStyle()}};IntegralUITreeGrid.prototype.getDefaultColumnStyle=function(){return{header:this.getDefaultColumnHeaderStyle(),body:this.getDefaultColumnBodyStyle(),footer:this.getDefaultColumnFooterStyle(),sorting:this.getDefaultColumnSortingStyle()}};
IntegralUITreeGrid.prototype.getDefaultColumnHeaderStyle=function(){return{cell:this.defaultStyle.column.header.cell,disabled:this.defaultStyle.column.header.disabled,normal:this.defaultStyle.column.header.normal,hovered:this.defaultStyle.column.header.hovered,selected:this.defaultStyle.column.header.selected}};
IntegralUITreeGrid.prototype.getDefaultColumnBodyStyle=function(){return{cell:this.defaultStyle.column.body.cell,disabled:this.defaultStyle.column.body.disabled,normal:this.defaultStyle.column.body.normal,hovered:this.defaultStyle.column.body.hovered,selected:this.defaultStyle.column.body.selected}};
IntegralUITreeGrid.prototype.getDefaultColumnFooterStyle=function(){return{cell:this.defaultStyle.column.footer.cell,disabled:this.defaultStyle.column.footer.disabled,normal:this.defaultStyle.column.footer.normal,hovered:this.defaultStyle.column.footer.hovered,selected:this.defaultStyle.column.footer.selected}};
IntegralUITreeGrid.prototype.getDefaultColumnSortingStyle=function(){return{normal:{ascending:this.defaultStyle.column.sorting.normal.ascending,descending:this.defaultStyle.column.sorting.normal.descending},selected:{ascending:this.defaultStyle.column.sorting.selected.ascending,descending:this.defaultStyle.column.sorting.selected.descending}}};IntegralUITreeGrid.prototype.getDefaultRowStyle=function(){return{general:this.getDefaultRowGeneralStyle(),expandBox:this.getDefaultRowExpandBoxStyle(),cell:this.getDefaultRowCellStyle()}};
IntegralUITreeGrid.prototype.getDefaultRowGeneralStyle=function(){return{disabled:this.defaultStyle.row.general.disabled,focused:this.defaultStyle.row.general.focused,normal:this.defaultStyle.row.general.normal,hovered:this.defaultStyle.row.general.hovered,selected:this.defaultStyle.row.general.selected}};
IntegralUITreeGrid.prototype.getDefaultRowExpandBoxStyle=function(){return{general:this.defaultStyle.row.expandBox.general,load:this.defaultStyle.row.expandBox.load,expanded:this.defaultStyle.row.expandBox.expanded,collapsed:this.defaultStyle.row.expandBox.collapsed}};
IntegralUITreeGrid.prototype.getDefaultRowCellStyle=function(){return{disabled:this.defaultStyle.row.cell.disabled,focused:this.defaultStyle.row.cell.focused,normal:this.defaultStyle.row.cell.normal,hovered:this.defaultStyle.row.cell.hovered,selected:this.defaultStyle.row.cell.selected}};IntegralUITreeGrid.prototype.getDefaultGridLinesStyle=function(){return{none:this.defaultStyle.gridLines.none,horizontal:this.defaultStyle.gridLines.horizontal,vertical:this.defaultStyle.gridLines.vertical,both:this.defaultStyle.gridLines.both}};
IntegralUITreeGrid.prototype.updateStyle=function(a){this.options.currentStyle=a?{general:this.getGeneralStyle(a.general),column:this.getColumnStyle(a.column),row:this.getRowStyle(a.row),gridLines:this.getGridLinesStyle(a.gridLines)}:this.getDefaultGridStyle()};IntegralUITreeGrid.prototype.resetRefresh=function(){this.refreshTimer&&clearTimeout(this.refreshTimer);this.refreshTimer=null};
IntegralUITreeGrid.prototype.refresh=function(a){this.resetRefresh();this.updateControlClass();for(a=0;a<this.scrollColumnList.length;a++)this.updateColumnStyle(this.scrollColumnList[a]);for(a=0;a<this.scrollRowList.length;a++)this.updateRowStyle(this.scrollRowList[a])};    return IntegralUITreeGrid;
}(IntegralUIBaseGrid));
export { IntegralUITreeGrid };
IntegralUITreeGrid.decorators = [
    { type: Component, args: [{
                selector: 'iui-treegrid',
                template: "\n\t\t<div [ngClass]=\"getControlClass()\" (mousewheel)=\"gridMouseWheel($event)\" (mouseleave)=\"gridMouseLeave($event)\" [ngStyle]=\"{ cursor: gridCursor }\" (dragleave)=\"ctrlDragLeave($event)\" (dragover)=\"ctrlDragOver($event)\" (drop)=\"ctrlDragDrop($event)\">\n\t\t\t<div *ngIf=\"showHeader\" class=\"iui-treegrid-block iui-treegrid-block-top\" [ngStyle]=\"{ left: -contentLeftPos + 'px' }\" #header>\n\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td [ngClass]=\"column.style.header\" *ngFor=\"let column of scrollColumnList\" (mousemove)=\"columnMouseMove($event, column)\" (mousedown)=\"columnMouseDown($event, column)\" (mouseup)=\"columnMouseUp($event, column)\" (mouseenter)=\"columnMouseEnter($event, column)\" (mouseleave)=\"columnMouseLeave($event, column)\" #columnElem>\n\t\t\t\t\t\t\t<div [ngStyle]=\"{ 'text-align': getColumnAlignment(column.data), width: getColumnWidth(column.data) + 'px' }\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"isSortingColumn(column.data)\" [ngClass]=\"column.style.sorting\" data-element=\"sort-button\"></span>\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]=\"headerData[0]\" [iuiTemplateOutletContext]=\"{$implicit: (column.data)}\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div class=\"iui-treegrid-block\" [ngStyle]=\"{ 'margin-top': blockMarginTop + 'px', height: blockSize.height + 'px' }\" (scroll)=\"onContentScroll($event)\" #contentBlock>\n\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\" style=\"position:absolute;\" [ngStyle]=\"{ left: -contentLeftPos + 'px' }\" #body>\n\t\t\t\t\t<tr [ngClass]=\"row.style.row\" *ngFor=\"let row of scrollRowList; let i = index\" (mouseenter)=\"rowMouseEnter($event, row)\" (mouseleave)=\"rowMouseLeave($event, row)\" (mousedown)=\"rowMouseDown($event, row)\" (mouseup)=\"rowMouseUp($event, row)\" draggable=\"true\" (dragstart)=\"rowDragStart($event, row)\" (dragover)=\"rowDragOver($event, row, i)\" (drop)=\"rowDragDrop($event, row)\" (click)=\"rowClickEvent($event, row)\" (dblclick)=\"rowDblClickEvent($event, row)\" #rowElem>\n\t\t\t\t\t\t<td [ngClass]=\"row.style.cell\" *ngFor=\"let cell of row.cells; let j = index\" (mousedown)=\"cellMouseDown($event, cell)\">\n\t\t\t\t\t\t\t<div [ngClass]=\"cell.style.content\" [ngStyle]=\"{ 'padding-left': cell.indent + 'px', 'text-align': cell.align, width: cell.width + 'px', height: cell.height }\" tabindex=\"{{cell.tabIndex}}\" [iuiFocus]=\"cell.data == this.currentFocusCell\" (focus)=\"cellGotFocus(cell)\" (blur)=\"cellLostFocus(cell)\" (keydown)=\"cellKeyDown($event, cell)\" (keypress)=\"cellKeyPress($event, cell)\" (keyup)=\"cellKeyUp($event, cell)\">\n\t\t\t\t\t\t\t\t<span *ngIf=\"cell.expandBoxAllowed\" [ngClass]=\"row.style.expandBox\" (mousedown)=\"expandBoxClicked($event, row.data)\"></span>\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]=\"cellData[0]\" [iuiTemplateOutletContext]=\"{$implicit: (cell.data)}\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t<div *ngIf=\"showFooter\" class=\"iui-treegrid-block iui-treegrid-block-bottom\" [ngStyle]=\"{ left: -contentLeftPos + 'px', bottom: getFooterBottomPos() + 'px' }\" #footer>\n\t\t\t\t<table cellpadding=\"0\" cellspacing=\"0\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td [ngClass]=\"column.style.footer\" *ngFor=\"let column of scrollColumnList\">\n\t\t\t\t\t\t\t<div [ngStyle]=\"{ 'text-align': getColumnAlignment(column.data, true), width: getColumnWidth(column.data) + 'px' }\">\n\t\t\t\t\t\t\t\t<span [iuiTemplateOutlet]=\"footerData[0]\" [iuiTemplateOutletContext]=\"{$implicit: (column.data)}\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</td> \n\t\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t</div>\n            <iui-scrollbar *ngIf=\"isVerScrollVisible()\" [value]=\"currentScrollPos.y\" [max]=\"maxScrollPos.y\" [largeChange]=\"scrollLargeChange.y\" [height]=\"scrollBarSize.height\" (valueChanged)=\"onVerticalScrollChanged($event)\" (scrollStart)=\"onVerticalScrollStart($event)\" (scrollEnd)=\"onVerticalScrollEnd($event)\" #verScroll></iui-scrollbar>\n            <iui-scrollbar *ngIf=\"isHorScrollVisible()\" [orientation]=\"horScrollOrientation\" [value]=\"currentScrollPos.x\" [max]=\"maxScrollPos.x\" [width]=\"scrollBarSize.width\" (valueChanged)=\"onHorizontalScrollChanged($event)\" (scrollStart)=\"onHorizontalScrollStart($event)\" (scrollEnd)=\"onHorizontalScrollEnd($event)\" #horScroll></iui-scrollbar>\n            <div *ngIf=\"isVerScrollVisible() && isHorScrollVisible()\" style=\"background:#f5f5f5;position:absolute;right:0;bottom:0;width:16px;height:16px;\"></div>\n\t\t</div>\n\t",
                inputs: ['allowDrag', 'allowDrop', 'allowFilter', 'allowFocus', 'appRef', 'columns', 'controlStyle', 'data', 'dataFields', 'focusedCell', 'gridLines', 'name', 'rowHeight', 'rows', 'paging', 'selectedColumn', 'selectedRow', 'selectionMode', 'sorting', 'state'],
                outputs: ['afterSelect', 'beforeEdit', 'beforeSelect', 'change', 'columnAdding', 'columnAdded', 'columnClick', 'columnRemoving', 'columnRemoved', 'columnsCleared', 'columnSizeChanged', 'dragDrop', 'dragOver', 'keyDown', 'keyPress', 'keyUp', 'loadComplete', 'rowAdding', 'rowAdded', 'rowClick', 'rowDblClick', 'rowRemoving', 'rowRemoved', 'rowsCleared', 'scrollPosChanged', 'selectionChanged', 'updateComplete'],
                providers: [IntegralUIBaseService, IntegralUIDataService],
                encapsulation: ViewEncapsulation.None
            },] },
];
/** @nocollapse */
IntegralUITreeGrid.ctorParameters = function () { return [
    { type: IntegralUIDataService, },
    { type: IntegralUIDragDropService, },
    { type: ElementRef, },
    { type: Renderer, },
    { type: IntegralUICommonService, },
    { type: IntegralUIFilterService, },
    { type: ComponentFactoryResolver, },
    { type: IntegralUIBaseService, },
]; };
IntegralUITreeGrid.propDecorators = {
    'templates': [{ type: ContentChildren, args: [IntegralUITemplate,] },],
    'columnElems': [{ type: ViewChildren, args: ['columnElem', { read: ElementRef },] },],
    'rowElems': [{ type: ViewChildren, args: ['rowElem', { read: ElementRef },] },],
    'headerElem': [{ type: ViewChild, args: ['header', { read: ElementRef },] },],
    'footerElem': [{ type: ViewChild, args: ['footer', { read: ElementRef },] },],
    'bodyElem': [{ type: ViewChild, args: ['body', { read: ElementRef },] },],
    'verScrollCmp': [{ type: ViewChild, args: ['verScroll',] },],
    'horScrollCmp': [{ type: ViewChild, args: ['horScroll',] },],
    'contentRef': [{ type: ViewChild, args: ['contentBlock', { read: ViewContainerRef },] },],
    'autoExpand': [{ type: Input },],
    'expandColumnIndex': [{ type: Input },],
    'indent': [{ type: Input },],
    'showHeader': [{ type: Input },],
    'showFooter': [{ type: Input },],
    'afterCollapse': [{ type: Output },],
    'afterExpand': [{ type: Output },],
    'beforeCollapse': [{ type: Output },],
    'beforeExpand': [{ type: Output },],
    'onWindowMouseMove': [{ type: HostListener, args: ['document:mousemove', ['$event'],] },],
    'onWindowMouseUp': [{ type: HostListener, args: ['document:mouseup', ['$event'],] },],
};
//# sourceMappingURL=integralui.treegrid.js.map